From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: rtlsdrblog <rtlsdrblog@gmail.com>
Date: Fri, 18 Aug 2023 21:21:41 +1200
Subject: [PATCH] add offset tuning bias tee hack

fix bias tee function call
---
 src/librtlsdr.c | 7 ++++++-
 1 file changed, 6 insertions(+), 1 deletion(-)

diff --git a/src/librtlsdr.c b/src/librtlsdr.c
index ee13556..92c43db 100644
--- a/src/librtlsdr.c
+++ b/src/librtlsdr.c
@@ -1241,9 +1241,14 @@ int rtlsdr_set_offset_tuning(rtlsdr_dev_t *dev, int on)
 	if (!dev)
 		return -1;
 
+	/* RTL-SDR-BLOG Hack, enables us to turn on the bias tee by clicking on "offset tuning" in software that doesn't have specified bias tee support.
+	* Offset tuning is not used for R820T/R828D devices so it is no problem.
+	*/
 	if ((dev->tuner_type == RTLSDR_TUNER_R820T) ||
-	    (dev->tuner_type == RTLSDR_TUNER_R828D))
+	    (dev->tuner_type == RTLSDR_TUNER_R828D)) {
+		rtlsdr_set_bias_tee(dev, on);
 		return -2;
+	}
 
 	if (dev->direct_sampling)
 		return -3;
-- 
2.40.0

